!function(t){function o(){for(var t,o,r={},e=arguments.length,n=0;e>n;n++){t=arguments[n];for(o in t)t.hasOwnProperty(o)&&(r[o]=t[o])}return r}function r(t){for(var o=[],r={},e=t.length,n=0;e>n;n++)r[t[n]]||(o.push(t[n]),r[t[n]]=1);return o}function e(t){this.init(t),this.cache={}}var n=t.require,i={comboUrl:"/combo",map:{}};e.prototype.init=function(t){this.opt=o(i,t),this.map=this.opt.map,console.log("后端传递的ID映射关系：",this.map),this.register()},e.prototype.register=function(){var t=this;n.addLoader(function(o,r){return t.requireLoad(o,r)})},e.prototype.buildUrl=function(t){var o=this.opt.comboUrl+"?";return o+="js="+encodeURIComponent(r(t).join(","))},e.prototype.loadDep=function(t,o){for(var r=this.map,e=t.length,i=[],a=0;e>a;a++){var s=t[a];if(!this.cache[s]&&o.getModuleState(s)===n.ModuleState.NOT_FOUND){var p=r[s];this.cache[s]=1,i.push(p.path)}}console.log("Esl要加载模块",o.id,"，当前去请求Combo的模块有: ",i.join(", ")),o.load(this.buildUrl(i))},e.prototype.requireLoad=function(t,o){console.log("\besl要加载id：",t.id);var r=t.id,e=this.map;if(!e[r])return!0;var n;try{n=this.analyze(r,e),this.loadDep(n,t,o)}catch(i){return console.log("analyze error",i),!0}return!1},e.prototype.analyze=function(t,o){for(var r=[],e=o[t],n=e.deps,i=n.length,a=0;i>a;a++){var s=n[a];if(o[s]){var p=this.analyze(n[a],o);r.push.apply(r,p)}}return r.push(t),r},e.prototype.destroy=function(){this.cache=this.map=this.opt=null},t.JetLoader=e}(this);